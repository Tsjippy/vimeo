{"version":3,"file":"vimeo.min.js","mappings":"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","sources":["webpack://vimeo/./partials/max_file_size.js","webpack://vimeo/./partials/vimeo_view.js","webpack://vimeo/../../../node_modules/querystringify/index.js","webpack://vimeo/../../../node_modules/requires-port/index.js","webpack://vimeo/../../../node_modules/url-parse/index.js","webpack://vimeo/webpack/bootstrap","webpack://vimeo/webpack/runtime/compat get default export","webpack://vimeo/webpack/runtime/define property getters","webpack://vimeo/webpack/runtime/global","webpack://vimeo/webpack/runtime/hasOwnProperty shorthand","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/noopUrlStorage.js","webpack://vimeo/../../../node_modules/js-base64/base64.mjs","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/error.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/upload.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/uuid.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/browser/isReactNative.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/browser/uriToBlob.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/browser/sources/FileSource.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/browser/sources/isCordova.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/browser/sources/readAsByteArray.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/browser/sources/StreamSource.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/browser/fileReader.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/browser/httpStack.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/browser/urlStorage.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/browser/index.js","webpack://vimeo/../../../node_modules/tus-js-client/lib.esm/browser/fileSignature.js","webpack://vimeo/./vimeo_upload.js","webpack://vimeo/../../../js/form_submit_functions.js","webpack://vimeo/./partials/upload_video.js","webpack://vimeo/../../../js/imports.js","webpack://vimeo/./vimeo.js"],"sourcesContent":["// Exclude videos from max size filter\r\nplupload.addFileFilter('max_file_size', function(maxSize, file, cb) {\r\n\t// Invalid file size\r\n    if (file.size !== undefined && maxSize && file.size > maxSize && file.type.split(\"/\")[0] != 'video') {\r\n        this.trigger('Error', {\r\n            code :      plupload.FILE_SIZE_ERROR,\r\n            message :   plupload.translate('File size error.'),\r\n            file :      file\r\n        });\r\n        cb(false);\r\n    } else {\r\n        cb(true);\r\n    }\r\n});","/* \r\n\t\tShow vimeo in wp library\r\n*/\r\n//replace preview with vimeo iframe\r\n// copied from \\wp-includes\\js\\media-views.js\r\nwp.media.view.Attachment.Details.prototype.render = function() {\r\n\twp.media.view.Attachment.prototype.render.apply( this, arguments );\r\n\r\n\twp.media.mixin.removeAllPlayers();\r\n\tthis.$( 'audio, video' ).each( function (i, elem) {\r\n\t\t\r\n\t\tvar el = wp.media.view.MediaDetails.prepareSrc( elem );\r\n\r\n\t\tnew window.MediaElementPlayer( el, wp.media.mixin.mejsSettings );\r\n\r\n\t\tif(elem.tagName == 'VIDEO'){\r\n\t\t\tloadVimeoVideo(el);\r\n\t\t}\r\n\t} );\r\n} \r\n\r\n//replace preview with vimeo iframe\r\nfunction loadVimeoVideo(el) {\r\n\tvar vimeoLink\t= el.src;\r\n\r\n\tif(el.querySelector('source') != null){\r\n\t\tvimeoLink\t= el.querySelector('source').src;\r\n\t}\r\n\r\n\tif(vimeoLink == '' || document.querySelector('.wp-media-wrapper.wp-video') == null){\r\n\t\t//try again after a few miliseconds till the el.src is available\r\n\t\tsetTimeout(loadVimeoVideo, 20, el);\r\n\t//if this is a vimeo item\r\n\t}else if(vimeoLink.includes('vimeo.com/')){\r\n\t\tlet element\t= document.querySelector('.wp-media-wrapper.wp-video');\r\n\r\n\t\telement.innerHTML\t= `\r\n\t\t<div class=\"vimeo-wrapper\">\r\n\t\t\t<div class='vimeo-embed-container' style='background:url(${sim.loadingGif}) center center no-repeat;'>\r\n\t\t\t\t<iframe src=\"${vimeoLink}\" style=\"width: 100%; height: 100%;\" onload='console.log(\"loaded\")'></iframe>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t`;\r\n\r\n\t\t// show the nice url in the url field\r\n\t\tdocument.querySelectorAll('.attachment-details-copy-link').forEach(el=>el.value\t= vimeoLink.replace('player.', '').replace('/video', '').split('?')[0]);\r\n\t}else{\r\n\t\tvar el = wp.media.view.MediaDetails.prepareSrc( elem );\r\n\t\tnew window.MediaElementPlayer( el, wp.media.mixin.mejsSettings );\r\n\t}\r\n}","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , controlOrWhitespace = /^[\\x00-\\x20\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/\n  , CRHTLF = /[\\n\\r\\t]/g\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , port = /:\\d+$/\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/;\n\n/**\n * Remove control characters and whitespace from the beginning of a string.\n *\n * @param {Object|String} str String to trim.\n * @returns {String} A new string representing `str` stripped of control\n *     characters and whitespace from its beginning.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(controlOrWhitespace, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d*)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      index = parse === '@'\n        ? address.lastIndexOf(parse)\n        : address.indexOf(parse);\n\n      if (~index) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n\n  if (url.auth) {\n    index = url.auth.indexOf(':');\n\n    if (~index) {\n      url.username = url.auth.slice(0, index);\n      url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n      url.password = url.auth.slice(index + 1);\n      url.password = encodeURIComponent(decodeURIComponent(url.password))\n    } else {\n      url.username = encodeURIComponent(decodeURIComponent(url.auth));\n    }\n\n    url.auth = url.password ? url.username +':'+ url.password : url.username;\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (port.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var index = value.indexOf(':');\n\n      if (~index) {\n        url.username = value.slice(0, index);\n        url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n        url.password = value.slice(index + 1);\n        url.password = encodeURIComponent(decodeURIComponent(url.password));\n      } else {\n        url.username = encodeURIComponent(decodeURIComponent(value));\n      }\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , host = url.host\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  } else if (\n    url.protocol !== 'file:' &&\n    isSpecial(url.protocol) &&\n    !host &&\n    url.pathname !== '/'\n  ) {\n    //\n    // Add back the empty userinfo, otherwise the original invalid URL\n    // might be transformed into a valid one with `url.pathname` as host.\n    //\n    result += '@';\n  }\n\n  //\n  // Trailing colon is removed from `url.host` when it is parsed. If it still\n  // ends with a colon, then add back the trailing colon that was removed. This\n  // prevents an invalid URL from being transformed into a valid one.\n  //\n  if (host[host.length - 1] === ':' || (port.test(url.hostname) && !url.port)) {\n    host += ':';\n  }\n\n  result += host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar NoopUrlStorage = /*#__PURE__*/function () {\n  function NoopUrlStorage() {\n    _classCallCheck(this, NoopUrlStorage);\n  }\n  return _createClass(NoopUrlStorage, [{\n    key: \"listAllUploads\",\n    value: function listAllUploads() {\n      return Promise.resolve([]);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(_fingerprint) {\n      return Promise.resolve([]);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(_urlStorageKey) {\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(_fingerprint, _upload) {\n      return Promise.resolve(null);\n    }\n  }]);\n}();\nexport { NoopUrlStorage as default };","/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.7';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it) => new Uint8Array(Array.prototype.slice.call(it, 0));\nconst _mkUriSafe = (src) => src\n    .replace(/=/g, '').replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = typeof btoa === 'function' ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 §5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 §5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, bin = '', r1, r2;\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)\n            : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)\n                : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n    }\n    return bin;\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = typeof atob === 'function' ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a).split('').map(c => c.charCodeAt(0)));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\nfunction _construct(t, e, r) { if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments); var o = [null]; o.push.apply(o, e); var p = new (t.bind.apply(t, o))(); return r && _setPrototypeOf(p, r.prototype), p; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _isNativeFunction(fn) { try { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; } catch (e) { return typeof fn === \"function\"; } }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nvar DetailedError = /*#__PURE__*/function (_Error) {\n  function DetailedError(message) {\n    var _this;\n    var causingErr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var req = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var res = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    _classCallCheck(this, DetailedError);\n    _this = _callSuper(this, DetailedError, [message]);\n    _this.originalRequest = req;\n    _this.originalResponse = res;\n    _this.causingError = causingErr;\n    if (causingErr != null) {\n      message += \", caused by \".concat(causingErr.toString());\n    }\n    if (req != null) {\n      var requestId = req.getHeader('X-Request-ID') || 'n/a';\n      var method = req.getMethod();\n      var url = req.getURL();\n      var status = res ? res.getStatus() : 'n/a';\n      var body = res ? res.getBody() || '' : 'n/a';\n      message += \", originated from request (method: \".concat(method, \", url: \").concat(url, \", response code: \").concat(status, \", response text: \").concat(body, \", request id: \").concat(requestId, \")\");\n    }\n    _this.message = message;\n    return _this;\n  }\n  _inherits(DetailedError, _Error);\n  return _createClass(DetailedError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nexport default DetailedError;","function _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport { Base64 } from 'js-base64';\nimport URL from 'url-parse';\nimport DetailedError from './error.js';\nimport { log } from './logger.js';\nimport uuid from './uuid.js';\nvar PROTOCOL_TUS_V1 = 'tus-v1';\nvar PROTOCOL_IETF_DRAFT_03 = 'ietf-draft-03';\nvar defaultOptions = {\n  endpoint: null,\n  uploadUrl: null,\n  metadata: {},\n  metadataForPartialUploads: {},\n  fingerprint: null,\n  uploadSize: null,\n  onProgress: null,\n  onChunkComplete: null,\n  onSuccess: null,\n  onError: null,\n  onUploadUrlAvailable: null,\n  overridePatchMethod: false,\n  headers: {},\n  addRequestId: false,\n  onBeforeRequest: null,\n  onAfterResponse: null,\n  onShouldRetry: defaultOnShouldRetry,\n  chunkSize: Number.POSITIVE_INFINITY,\n  retryDelays: [0, 1000, 3000, 5000],\n  parallelUploads: 1,\n  parallelUploadBoundaries: null,\n  storeFingerprintForResuming: true,\n  removeFingerprintOnSuccess: false,\n  uploadLengthDeferred: false,\n  uploadDataDuringCreation: false,\n  urlStorage: null,\n  fileReader: null,\n  httpStack: null,\n  protocol: PROTOCOL_TUS_V1\n};\nvar BaseUpload = /*#__PURE__*/function () {\n  function BaseUpload(file, options) {\n    _classCallCheck(this, BaseUpload);\n    // Warn about removed options from previous versions\n    if ('resume' in options) {\n      console.log('tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead.');\n    }\n\n    // The default options will already be added from the wrapper classes.\n    this.options = options;\n\n    // Cast chunkSize to integer\n    this.options.chunkSize = Number(this.options.chunkSize);\n\n    // The storage module used to store URLs\n    this._urlStorage = this.options.urlStorage;\n\n    // The underlying File/Blob object\n    this.file = file;\n\n    // The URL against which the file will be uploaded\n    this.url = null;\n\n    // The underlying request object for the current PATCH request\n    this._req = null;\n\n    // The fingerpinrt for the current file (set after start())\n    this._fingerprint = null;\n\n    // The key that the URL storage returned when saving an URL with a fingerprint,\n    this._urlStorageKey = null;\n\n    // The offset used in the current PATCH request\n    this._offset = null;\n\n    // True if the current PATCH request has been aborted\n    this._aborted = false;\n\n    // The file's size in bytes\n    this._size = null;\n\n    // The Source object which will wrap around the given file and provides us\n    // with a unified interface for getting its size and slice chunks from its\n    // content allowing us to easily handle Files, Blobs, Buffers and Streams.\n    this._source = null;\n\n    // The current count of attempts which have been made. Zero indicates none.\n    this._retryAttempt = 0;\n\n    // The timeout's ID which is used to delay the next retry\n    this._retryTimeout = null;\n\n    // The offset of the remote upload before the latest attempt was started.\n    this._offsetBeforeRetry = 0;\n\n    // An array of BaseUpload instances which are used for uploading the different\n    // parts, if the parallelUploads option is used.\n    this._parallelUploads = null;\n\n    // An array of upload URLs which are used for uploading the different\n    // parts, if the parallelUploads option is used.\n    this._parallelUploadUrls = null;\n  }\n\n  /**\n   * Use the Termination extension to delete an upload from the server by sending a DELETE\n   * request to the specified upload URL. This is only possible if the server supports the\n   * Termination extension. If the `options.retryDelays` property is set, the method will\n   * also retry if an error ocurrs.\n   *\n   * @param {String} url The upload's URL which will be terminated.\n   * @param {object} options Optional options for influencing HTTP requests.\n   * @return {Promise} The Promise will be resolved/rejected when the requests finish.\n   */\n  return _createClass(BaseUpload, [{\n    key: \"findPreviousUploads\",\n    value: function findPreviousUploads() {\n      var _this = this;\n      return this.options.fingerprint(this.file, this.options).then(function (fingerprint) {\n        return _this._urlStorage.findUploadsByFingerprint(fingerprint);\n      });\n    }\n  }, {\n    key: \"resumeFromPreviousUpload\",\n    value: function resumeFromPreviousUpload(previousUpload) {\n      this.url = previousUpload.uploadUrl || null;\n      this._parallelUploadUrls = previousUpload.parallelUploadUrls || null;\n      this._urlStorageKey = previousUpload.urlStorageKey;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this2 = this;\n      var file = this.file;\n      if (!file) {\n        this._emitError(new Error('tus: no file or stream to upload provided'));\n        return;\n      }\n      if (![PROTOCOL_TUS_V1, PROTOCOL_IETF_DRAFT_03].includes(this.options.protocol)) {\n        this._emitError(new Error(\"tus: unsupported protocol \".concat(this.options.protocol)));\n        return;\n      }\n      if (!this.options.endpoint && !this.options.uploadUrl && !this.url) {\n        this._emitError(new Error('tus: neither an endpoint or an upload URL is provided'));\n        return;\n      }\n      var retryDelays = this.options.retryDelays;\n      if (retryDelays != null && Object.prototype.toString.call(retryDelays) !== '[object Array]') {\n        this._emitError(new Error('tus: the `retryDelays` option must either be an array or null'));\n        return;\n      }\n      if (this.options.parallelUploads > 1) {\n        // Test which options are incompatible with parallel uploads.\n        for (var _i = 0, _arr = ['uploadUrl', 'uploadSize', 'uploadLengthDeferred']; _i < _arr.length; _i++) {\n          var optionName = _arr[_i];\n          if (this.options[optionName]) {\n            this._emitError(new Error(\"tus: cannot use the \".concat(optionName, \" option when parallelUploads is enabled\")));\n            return;\n          }\n        }\n      }\n      if (this.options.parallelUploadBoundaries) {\n        if (this.options.parallelUploads <= 1) {\n          this._emitError(new Error('tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled'));\n          return;\n        }\n        if (this.options.parallelUploads !== this.options.parallelUploadBoundaries.length) {\n          this._emitError(new Error('tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`'));\n          return;\n        }\n      }\n      this.options.fingerprint(file, this.options).then(function (fingerprint) {\n        if (fingerprint == null) {\n          log('No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.');\n        } else {\n          log(\"Calculated fingerprint: \".concat(fingerprint));\n        }\n        _this2._fingerprint = fingerprint;\n        if (_this2._source) {\n          return _this2._source;\n        }\n        return _this2.options.fileReader.openFile(file, _this2.options.chunkSize);\n      }).then(function (source) {\n        _this2._source = source;\n\n        // First, we look at the uploadLengthDeferred option.\n        // Next, we check if the caller has supplied a manual upload size.\n        // Finally, we try to use the calculated size from the source object.\n        if (_this2.options.uploadLengthDeferred) {\n          _this2._size = null;\n        } else if (_this2.options.uploadSize != null) {\n          _this2._size = Number(_this2.options.uploadSize);\n          if (Number.isNaN(_this2._size)) {\n            _this2._emitError(new Error('tus: cannot convert `uploadSize` option into a number'));\n            return;\n          }\n        } else {\n          _this2._size = _this2._source.size;\n          if (_this2._size == null) {\n            _this2._emitError(new Error(\"tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option\"));\n            return;\n          }\n        }\n\n        // If the upload was configured to use multiple requests or if we resume from\n        // an upload which used multiple requests, we start a parallel upload.\n        if (_this2.options.parallelUploads > 1 || _this2._parallelUploadUrls != null) {\n          _this2._startParallelUpload();\n        } else {\n          _this2._startSingleUpload();\n        }\n      })[\"catch\"](function (err) {\n        _this2._emitError(err);\n      });\n    }\n\n    /**\n     * Initiate the uploading procedure for a parallelized upload, where one file is split into\n     * multiple request which are run in parallel.\n     *\n     * @api private\n     */\n  }, {\n    key: \"_startParallelUpload\",\n    value: function _startParallelUpload() {\n      var _this$options$paralle,\n        _this3 = this;\n      var totalSize = this._size;\n      var totalProgress = 0;\n      this._parallelUploads = [];\n      var partCount = this._parallelUploadUrls != null ? this._parallelUploadUrls.length : this.options.parallelUploads;\n\n      // The input file will be split into multiple slices which are uploaded in separate\n      // requests. Here we get the start and end position for the slices.\n      var parts = (_this$options$paralle = this.options.parallelUploadBoundaries) !== null && _this$options$paralle !== void 0 ? _this$options$paralle : splitSizeIntoParts(this._source.size, partCount);\n\n      // Attach URLs from previous uploads, if available.\n      if (this._parallelUploadUrls) {\n        parts.forEach(function (part, index) {\n          part.uploadUrl = _this3._parallelUploadUrls[index] || null;\n        });\n      }\n\n      // Create an empty list for storing the upload URLs\n      this._parallelUploadUrls = new Array(parts.length);\n\n      // Generate a promise for each slice that will be resolve if the respective\n      // upload is completed.\n      var uploads = parts.map(function (part, index) {\n        var lastPartProgress = 0;\n        return _this3._source.slice(part.start, part.end).then(function (_ref) {\n          var value = _ref.value;\n          return new Promise(function (resolve, reject) {\n            // Merge with the user supplied options but overwrite some values.\n            var options = _objectSpread(_objectSpread({}, _this3.options), {}, {\n              // If available, the partial upload should be resumed from a previous URL.\n              uploadUrl: part.uploadUrl || null,\n              // We take manually care of resuming for partial uploads, so they should\n              // not be stored in the URL storage.\n              storeFingerprintForResuming: false,\n              removeFingerprintOnSuccess: false,\n              // Reset the parallelUploads option to not cause recursion.\n              parallelUploads: 1,\n              // Reset this option as we are not doing a parallel upload.\n              parallelUploadBoundaries: null,\n              metadata: _this3.options.metadataForPartialUploads,\n              // Add the header to indicate the this is a partial upload.\n              headers: _objectSpread(_objectSpread({}, _this3.options.headers), {}, {\n                'Upload-Concat': 'partial'\n              }),\n              // Reject or resolve the promise if the upload errors or completes.\n              onSuccess: resolve,\n              onError: reject,\n              // Based in the progress for this partial upload, calculate the progress\n              // for the entire final upload.\n              onProgress: function onProgress(newPartProgress) {\n                totalProgress = totalProgress - lastPartProgress + newPartProgress;\n                lastPartProgress = newPartProgress;\n                _this3._emitProgress(totalProgress, totalSize);\n              },\n              // Wait until every partial upload has an upload URL, so we can add\n              // them to the URL storage.\n              onUploadUrlAvailable: function onUploadUrlAvailable() {\n                _this3._parallelUploadUrls[index] = upload.url;\n                // Test if all uploads have received an URL\n                if (_this3._parallelUploadUrls.filter(function (u) {\n                  return Boolean(u);\n                }).length === parts.length) {\n                  _this3._saveUploadInUrlStorage();\n                }\n              }\n            });\n            var upload = new BaseUpload(value, options);\n            upload.start();\n\n            // Store the upload in an array, so we can later abort them if necessary.\n            _this3._parallelUploads.push(upload);\n          });\n        });\n      });\n      var req;\n      // Wait until all partial uploads are finished and we can send the POST request for\n      // creating the final upload.\n      Promise.all(uploads).then(function () {\n        req = _this3._openRequest('POST', _this3.options.endpoint);\n        req.setHeader('Upload-Concat', \"final;\".concat(_this3._parallelUploadUrls.join(' ')));\n\n        // Add metadata if values have been added\n        var metadata = encodeMetadata(_this3.options.metadata);\n        if (metadata !== '') {\n          req.setHeader('Upload-Metadata', metadata);\n        }\n        return _this3._sendRequest(req, null);\n      }).then(function (res) {\n        if (!inStatusCategory(res.getStatus(), 200)) {\n          _this3._emitHttpError(req, res, 'tus: unexpected response while creating upload');\n          return;\n        }\n        var location = res.getHeader('Location');\n        if (location == null) {\n          _this3._emitHttpError(req, res, 'tus: invalid or missing Location header');\n          return;\n        }\n        _this3.url = resolveUrl(_this3.options.endpoint, location);\n        log(\"Created upload at \".concat(_this3.url));\n        _this3._emitSuccess(res);\n      })[\"catch\"](function (err) {\n        _this3._emitError(err);\n      });\n    }\n\n    /**\n     * Initiate the uploading procedure for a non-parallel upload. Here the entire file is\n     * uploaded in a sequential matter.\n     *\n     * @api private\n     */\n  }, {\n    key: \"_startSingleUpload\",\n    value: function _startSingleUpload() {\n      // Reset the aborted flag when the upload is started or else the\n      // _performUpload will stop before sending a request if the upload has been\n      // aborted previously.\n      this._aborted = false;\n\n      // The upload had been started previously and we should reuse this URL.\n      if (this.url != null) {\n        log(\"Resuming upload from previous URL: \".concat(this.url));\n        this._resumeUpload();\n        return;\n      }\n\n      // A URL has manually been specified, so we try to resume\n      if (this.options.uploadUrl != null) {\n        log(\"Resuming upload from provided URL: \".concat(this.options.uploadUrl));\n        this.url = this.options.uploadUrl;\n        this._resumeUpload();\n        return;\n      }\n\n      // An upload has not started for the file yet, so we start a new one\n      log('Creating a new upload');\n      this._createUpload();\n    }\n\n    /**\n     * Abort any running request and stop the current upload. After abort is called, no event\n     * handler will be invoked anymore. You can use the `start` method to resume the upload\n     * again.\n     * If `shouldTerminate` is true, the `terminate` function will be called to remove the\n     * current upload from the server.\n     *\n     * @param {boolean} shouldTerminate True if the upload should be deleted from the server.\n     * @return {Promise} The Promise will be resolved/rejected when the requests finish.\n     */\n  }, {\n    key: \"abort\",\n    value: function abort(shouldTerminate) {\n      var _this4 = this;\n      // Stop any parallel partial uploads, that have been started in _startParallelUploads.\n      if (this._parallelUploads != null) {\n        var _iterator = _createForOfIteratorHelper(this._parallelUploads),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var upload = _step.value;\n            upload.abort(shouldTerminate);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n\n      // Stop any current running request.\n      if (this._req !== null) {\n        this._req.abort();\n        // Note: We do not close the file source here, so the user can resume in the future.\n      }\n      this._aborted = true;\n\n      // Stop any timeout used for initiating a retry.\n      if (this._retryTimeout != null) {\n        clearTimeout(this._retryTimeout);\n        this._retryTimeout = null;\n      }\n      if (!shouldTerminate || this.url == null) {\n        return Promise.resolve();\n      }\n      return BaseUpload.terminate(this.url, this.options)\n      // Remove entry from the URL storage since the upload URL is no longer valid.\n      .then(function () {\n        return _this4._removeFromUrlStorage();\n      });\n    }\n  }, {\n    key: \"_emitHttpError\",\n    value: function _emitHttpError(req, res, message, causingErr) {\n      this._emitError(new DetailedError(message, causingErr, req, res));\n    }\n  }, {\n    key: \"_emitError\",\n    value: function _emitError(err) {\n      var _this5 = this;\n      // Do not emit errors, e.g. from aborted HTTP requests, if the upload has been stopped.\n      if (this._aborted) return;\n\n      // Check if we should retry, when enabled, before sending the error to the user.\n      if (this.options.retryDelays != null) {\n        // We will reset the attempt counter if\n        // - we were already able to connect to the server (offset != null) and\n        // - we were able to upload a small chunk of data to the server\n        var shouldResetDelays = this._offset != null && this._offset > this._offsetBeforeRetry;\n        if (shouldResetDelays) {\n          this._retryAttempt = 0;\n        }\n        if (shouldRetry(err, this._retryAttempt, this.options)) {\n          var delay = this.options.retryDelays[this._retryAttempt++];\n          this._offsetBeforeRetry = this._offset;\n          this._retryTimeout = setTimeout(function () {\n            _this5.start();\n          }, delay);\n          return;\n        }\n      }\n      if (typeof this.options.onError === 'function') {\n        this.options.onError(err);\n      } else {\n        throw err;\n      }\n    }\n\n    /**\n     * Publishes notification if the upload has been successfully completed.\n     *\n     * @param {object} lastResponse Last HTTP response.\n     * @api private\n     */\n  }, {\n    key: \"_emitSuccess\",\n    value: function _emitSuccess(lastResponse) {\n      if (this.options.removeFingerprintOnSuccess) {\n        // Remove stored fingerprint and corresponding endpoint. This causes\n        // new uploads of the same file to be treated as a different file.\n        this._removeFromUrlStorage();\n      }\n      if (typeof this.options.onSuccess === 'function') {\n        this.options.onSuccess({\n          lastResponse: lastResponse\n        });\n      }\n    }\n\n    /**\n     * Publishes notification when data has been sent to the server. This\n     * data may not have been accepted by the server yet.\n     *\n     * @param {number} bytesSent  Number of bytes sent to the server.\n     * @param {number} bytesTotal Total number of bytes to be sent to the server.\n     * @api private\n     */\n  }, {\n    key: \"_emitProgress\",\n    value: function _emitProgress(bytesSent, bytesTotal) {\n      if (typeof this.options.onProgress === 'function') {\n        this.options.onProgress(bytesSent, bytesTotal);\n      }\n    }\n\n    /**\n     * Publishes notification when a chunk of data has been sent to the server\n     * and accepted by the server.\n     * @param {number} chunkSize  Size of the chunk that was accepted by the server.\n     * @param {number} bytesAccepted Total number of bytes that have been\n     *                                accepted by the server.\n     * @param {number} bytesTotal Total number of bytes to be sent to the server.\n     * @api private\n     */\n  }, {\n    key: \"_emitChunkComplete\",\n    value: function _emitChunkComplete(chunkSize, bytesAccepted, bytesTotal) {\n      if (typeof this.options.onChunkComplete === 'function') {\n        this.options.onChunkComplete(chunkSize, bytesAccepted, bytesTotal);\n      }\n    }\n\n    /**\n     * Create a new upload using the creation extension by sending a POST\n     * request to the endpoint. After successful creation the file will be\n     * uploaded\n     *\n     * @api private\n     */\n  }, {\n    key: \"_createUpload\",\n    value: function _createUpload() {\n      var _this6 = this;\n      if (!this.options.endpoint) {\n        this._emitError(new Error('tus: unable to create upload because no endpoint is provided'));\n        return;\n      }\n      var req = this._openRequest('POST', this.options.endpoint);\n      if (this.options.uploadLengthDeferred) {\n        req.setHeader('Upload-Defer-Length', '1');\n      } else {\n        req.setHeader('Upload-Length', \"\".concat(this._size));\n      }\n\n      // Add metadata if values have been added\n      var metadata = encodeMetadata(this.options.metadata);\n      if (metadata !== '') {\n        req.setHeader('Upload-Metadata', metadata);\n      }\n      var promise;\n      if (this.options.uploadDataDuringCreation && !this.options.uploadLengthDeferred) {\n        this._offset = 0;\n        promise = this._addChunkToRequest(req);\n      } else {\n        if (this.options.protocol === PROTOCOL_IETF_DRAFT_03) {\n          req.setHeader('Upload-Complete', '?0');\n        }\n        promise = this._sendRequest(req, null);\n      }\n      promise.then(function (res) {\n        if (!inStatusCategory(res.getStatus(), 200)) {\n          _this6._emitHttpError(req, res, 'tus: unexpected response while creating upload');\n          return;\n        }\n        var location = res.getHeader('Location');\n        if (location == null) {\n          _this6._emitHttpError(req, res, 'tus: invalid or missing Location header');\n          return;\n        }\n        _this6.url = resolveUrl(_this6.options.endpoint, location);\n        log(\"Created upload at \".concat(_this6.url));\n        if (typeof _this6.options.onUploadUrlAvailable === 'function') {\n          _this6.options.onUploadUrlAvailable();\n        }\n        if (_this6._size === 0) {\n          // Nothing to upload and file was successfully created\n          _this6._emitSuccess(res);\n          _this6._source.close();\n          return;\n        }\n        _this6._saveUploadInUrlStorage().then(function () {\n          if (_this6.options.uploadDataDuringCreation) {\n            _this6._handleUploadResponse(req, res);\n          } else {\n            _this6._offset = 0;\n            _this6._performUpload();\n          }\n        });\n      })[\"catch\"](function (err) {\n        _this6._emitHttpError(req, null, 'tus: failed to create upload', err);\n      });\n    }\n\n    /*\n     * Try to resume an existing upload. First a HEAD request will be sent\n     * to retrieve the offset. If the request fails a new upload will be\n     * created. In the case of a successful response the file will be uploaded.\n     *\n     * @api private\n     */\n  }, {\n    key: \"_resumeUpload\",\n    value: function _resumeUpload() {\n      var _this7 = this;\n      var req = this._openRequest('HEAD', this.url);\n      var promise = this._sendRequest(req, null);\n      promise.then(function (res) {\n        var status = res.getStatus();\n        if (!inStatusCategory(status, 200)) {\n          // If the upload is locked (indicated by the 423 Locked status code), we\n          // emit an error instead of directly starting a new upload. This way the\n          // retry logic can catch the error and will retry the upload. An upload\n          // is usually locked for a short period of time and will be available\n          // afterwards.\n          if (status === 423) {\n            _this7._emitHttpError(req, res, 'tus: upload is currently locked; retry later');\n            return;\n          }\n          if (inStatusCategory(status, 400)) {\n            // Remove stored fingerprint and corresponding endpoint,\n            // on client errors since the file can not be found\n            _this7._removeFromUrlStorage();\n          }\n          if (!_this7.options.endpoint) {\n            // Don't attempt to create a new upload if no endpoint is provided.\n            _this7._emitHttpError(req, res, 'tus: unable to resume upload (new upload cannot be created without an endpoint)');\n            return;\n          }\n\n          // Try to create a new upload\n          _this7.url = null;\n          _this7._createUpload();\n          return;\n        }\n        var offset = Number.parseInt(res.getHeader('Upload-Offset'), 10);\n        if (Number.isNaN(offset)) {\n          _this7._emitHttpError(req, res, 'tus: invalid or missing offset value');\n          return;\n        }\n        var length = Number.parseInt(res.getHeader('Upload-Length'), 10);\n        if (Number.isNaN(length) && !_this7.options.uploadLengthDeferred && _this7.options.protocol === PROTOCOL_TUS_V1) {\n          _this7._emitHttpError(req, res, 'tus: invalid or missing length value');\n          return;\n        }\n        if (typeof _this7.options.onUploadUrlAvailable === 'function') {\n          _this7.options.onUploadUrlAvailable();\n        }\n        _this7._saveUploadInUrlStorage().then(function () {\n          // Upload has already been completed and we do not need to send additional\n          // data to the server\n          if (offset === length) {\n            _this7._emitProgress(length, length);\n            _this7._emitSuccess(res);\n            return;\n          }\n          _this7._offset = offset;\n          _this7._performUpload();\n        });\n      })[\"catch\"](function (err) {\n        _this7._emitHttpError(req, null, 'tus: failed to resume upload', err);\n      });\n    }\n\n    /**\n     * Start uploading the file using PATCH requests. The file will be divided\n     * into chunks as specified in the chunkSize option. During the upload\n     * the onProgress event handler may be invoked multiple times.\n     *\n     * @api private\n     */\n  }, {\n    key: \"_performUpload\",\n    value: function _performUpload() {\n      var _this8 = this;\n      // If the upload has been aborted, we will not send the next PATCH request.\n      // This is important if the abort method was called during a callback, such\n      // as onChunkComplete or onProgress.\n      if (this._aborted) {\n        return;\n      }\n      var req;\n\n      // Some browser and servers may not support the PATCH method. For those\n      // cases, you can tell tus-js-client to use a POST request with the\n      // X-HTTP-Method-Override header for simulating a PATCH request.\n      if (this.options.overridePatchMethod) {\n        req = this._openRequest('POST', this.url);\n        req.setHeader('X-HTTP-Method-Override', 'PATCH');\n      } else {\n        req = this._openRequest('PATCH', this.url);\n      }\n      req.setHeader('Upload-Offset', \"\".concat(this._offset));\n      var promise = this._addChunkToRequest(req);\n      promise.then(function (res) {\n        if (!inStatusCategory(res.getStatus(), 200)) {\n          _this8._emitHttpError(req, res, 'tus: unexpected response while uploading chunk');\n          return;\n        }\n        _this8._handleUploadResponse(req, res);\n      })[\"catch\"](function (err) {\n        // Don't emit an error if the upload was aborted manually\n        if (_this8._aborted) {\n          return;\n        }\n        _this8._emitHttpError(req, null, \"tus: failed to upload chunk at offset \".concat(_this8._offset), err);\n      });\n    }\n\n    /**\n     * _addChunktoRequest reads a chunk from the source and sends it using the\n     * supplied request object. It will not handle the response.\n     *\n     * @api private\n     */\n  }, {\n    key: \"_addChunkToRequest\",\n    value: function _addChunkToRequest(req) {\n      var _this9 = this;\n      var start = this._offset;\n      var end = this._offset + this.options.chunkSize;\n      req.setProgressHandler(function (bytesSent) {\n        _this9._emitProgress(start + bytesSent, _this9._size);\n      });\n      req.setHeader('Content-Type', 'application/offset+octet-stream');\n\n      // The specified chunkSize may be Infinity or the calcluated end position\n      // may exceed the file's size. In both cases, we limit the end position to\n      // the input's total size for simpler calculations and correctness.\n      if ((end === Number.POSITIVE_INFINITY || end > this._size) && !this.options.uploadLengthDeferred) {\n        end = this._size;\n      }\n      return this._source.slice(start, end).then(function (_ref2) {\n        var value = _ref2.value,\n          done = _ref2.done;\n        var valueSize = value !== null && value !== void 0 && value.size ? value.size : 0;\n\n        // If the upload length is deferred, the upload size was not specified during\n        // upload creation. So, if the file reader is done reading, we know the total\n        // upload size and can tell the tus server.\n        if (_this9.options.uploadLengthDeferred && done) {\n          _this9._size = _this9._offset + valueSize;\n          req.setHeader('Upload-Length', \"\".concat(_this9._size));\n        }\n\n        // The specified uploadSize might not match the actual amount of data that a source\n        // provides. In these cases, we cannot successfully complete the upload, so we\n        // rather error out and let the user know. If not, tus-js-client will be stuck\n        // in a loop of repeating empty PATCH requests.\n        // See https://community.transloadit.com/t/how-to-abort-hanging-companion-uploads/16488/13\n        var newSize = _this9._offset + valueSize;\n        if (!_this9.options.uploadLengthDeferred && done && newSize !== _this9._size) {\n          return Promise.reject(new Error(\"upload was configured with a size of \".concat(_this9._size, \" bytes, but the source is done after \").concat(newSize, \" bytes\")));\n        }\n        if (value === null) {\n          return _this9._sendRequest(req);\n        }\n        if (_this9.options.protocol === PROTOCOL_IETF_DRAFT_03) {\n          req.setHeader('Upload-Complete', done ? '?1' : '?0');\n        }\n        _this9._emitProgress(_this9._offset, _this9._size);\n        return _this9._sendRequest(req, value);\n      });\n    }\n\n    /**\n     * _handleUploadResponse is used by requests that haven been sent using _addChunkToRequest\n     * and already have received a response.\n     *\n     * @api private\n     */\n  }, {\n    key: \"_handleUploadResponse\",\n    value: function _handleUploadResponse(req, res) {\n      var offset = Number.parseInt(res.getHeader('Upload-Offset'), 10);\n      if (Number.isNaN(offset)) {\n        this._emitHttpError(req, res, 'tus: invalid or missing offset value');\n        return;\n      }\n      this._emitProgress(offset, this._size);\n      this._emitChunkComplete(offset - this._offset, offset, this._size);\n      this._offset = offset;\n      if (offset === this._size) {\n        // Yay, finally done :)\n        this._emitSuccess(res);\n        this._source.close();\n        return;\n      }\n      this._performUpload();\n    }\n\n    /**\n     * Create a new HTTP request object with the given method and URL.\n     *\n     * @api private\n     */\n  }, {\n    key: \"_openRequest\",\n    value: function _openRequest(method, url) {\n      var req = openRequest(method, url, this.options);\n      this._req = req;\n      return req;\n    }\n\n    /**\n     * Remove the entry in the URL storage, if it has been saved before.\n     *\n     * @api private\n     */\n  }, {\n    key: \"_removeFromUrlStorage\",\n    value: function _removeFromUrlStorage() {\n      var _this10 = this;\n      if (!this._urlStorageKey) return;\n      this._urlStorage.removeUpload(this._urlStorageKey)[\"catch\"](function (err) {\n        _this10._emitError(err);\n      });\n      this._urlStorageKey = null;\n    }\n\n    /**\n     * Add the upload URL to the URL storage, if possible.\n     *\n     * @api private\n     */\n  }, {\n    key: \"_saveUploadInUrlStorage\",\n    value: function _saveUploadInUrlStorage() {\n      var _this11 = this;\n      // We do not store the upload URL\n      // - if it was disabled in the option, or\n      // - if no fingerprint was calculated for the input (i.e. a stream), or\n      // - if the URL is already stored (i.e. key is set alread).\n      if (!this.options.storeFingerprintForResuming || !this._fingerprint || this._urlStorageKey !== null) {\n        return Promise.resolve();\n      }\n      var storedUpload = {\n        size: this._size,\n        metadata: this.options.metadata,\n        creationTime: new Date().toString()\n      };\n      if (this._parallelUploads) {\n        // Save multiple URLs if the parallelUploads option is used ...\n        storedUpload.parallelUploadUrls = this._parallelUploadUrls;\n      } else {\n        // ... otherwise we just save the one available URL.\n        storedUpload.uploadUrl = this.url;\n      }\n      return this._urlStorage.addUpload(this._fingerprint, storedUpload).then(function (urlStorageKey) {\n        _this11._urlStorageKey = urlStorageKey;\n      });\n    }\n\n    /**\n     * Send a request with the provided body.\n     *\n     * @api private\n     */\n  }, {\n    key: \"_sendRequest\",\n    value: function _sendRequest(req) {\n      var body = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      return sendRequest(req, body, this.options);\n    }\n  }], [{\n    key: \"terminate\",\n    value: function terminate(url) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var req = openRequest('DELETE', url, options);\n      return sendRequest(req, null, options).then(function (res) {\n        // A 204 response indicates a successfull request\n        if (res.getStatus() === 204) {\n          return;\n        }\n        throw new DetailedError('tus: unexpected response while terminating upload', null, req, res);\n      })[\"catch\"](function (err) {\n        if (!(err instanceof DetailedError)) {\n          err = new DetailedError('tus: failed to terminate upload', err, req, null);\n        }\n        if (!shouldRetry(err, 0, options)) {\n          throw err;\n        }\n\n        // Instead of keeping track of the retry attempts, we remove the first element from the delays\n        // array. If the array is empty, all retry attempts are used up and we will bubble up the error.\n        // We recursively call the terminate function will removing elements from the retryDelays array.\n        var delay = options.retryDelays[0];\n        var remainingDelays = options.retryDelays.slice(1);\n        var newOptions = _objectSpread(_objectSpread({}, options), {}, {\n          retryDelays: remainingDelays\n        });\n        return new Promise(function (resolve) {\n          return setTimeout(resolve, delay);\n        }).then(function () {\n          return BaseUpload.terminate(url, newOptions);\n        });\n      });\n    }\n  }]);\n}();\nfunction encodeMetadata(metadata) {\n  return Object.entries(metadata).map(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n      key = _ref4[0],\n      value = _ref4[1];\n    return \"\".concat(key, \" \").concat(Base64.encode(String(value)));\n  }).join(',');\n}\n\n/**\n * Checks whether a given status is in the range of the expected category.\n * For example, only a status between 200 and 299 will satisfy the category 200.\n *\n * @api private\n */\nfunction inStatusCategory(status, category) {\n  return status >= category && status < category + 100;\n}\n\n/**\n * Create a new HTTP request with the specified method and URL.\n * The necessary headers that are included in every request\n * will be added, including the request ID.\n *\n * @api private\n */\nfunction openRequest(method, url, options) {\n  var req = options.httpStack.createRequest(method, url);\n  if (options.protocol === PROTOCOL_IETF_DRAFT_03) {\n    req.setHeader('Upload-Draft-Interop-Version', '5');\n  } else {\n    req.setHeader('Tus-Resumable', '1.0.0');\n  }\n  var headers = options.headers || {};\n  for (var _i2 = 0, _Object$entries = Object.entries(headers); _i2 < _Object$entries.length; _i2++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i2], 2),\n      name = _Object$entries$_i[0],\n      value = _Object$entries$_i[1];\n    req.setHeader(name, value);\n  }\n  if (options.addRequestId) {\n    var requestId = uuid();\n    req.setHeader('X-Request-ID', requestId);\n  }\n  return req;\n}\n\n/**\n * Send a request with the provided body while invoking the onBeforeRequest\n * and onAfterResponse callbacks.\n *\n * @api private\n */\nfunction sendRequest(_x, _x2, _x3) {\n  return _sendRequest2.apply(this, arguments);\n}\n/**\n * Checks whether the browser running this code has internet access.\n * This function will always return true in the node.js environment\n *\n * @api private\n */\nfunction _sendRequest2() {\n  _sendRequest2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, body, options) {\n    var res;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!(typeof options.onBeforeRequest === 'function')) {\n            _context.next = 3;\n            break;\n          }\n          _context.next = 3;\n          return options.onBeforeRequest(req);\n        case 3:\n          _context.next = 5;\n          return req.send(body);\n        case 5:\n          res = _context.sent;\n          if (!(typeof options.onAfterResponse === 'function')) {\n            _context.next = 9;\n            break;\n          }\n          _context.next = 9;\n          return options.onAfterResponse(req, res);\n        case 9:\n          return _context.abrupt(\"return\", res);\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _sendRequest2.apply(this, arguments);\n}\nfunction isOnline() {\n  var online = true;\n  // Note: We don't reference `window` here because the navigator object also exists\n  // in a Web Worker's context.\n  if (typeof navigator !== 'undefined' && navigator.onLine === false) {\n    online = false;\n  }\n  return online;\n}\n\n/**\n * Checks whether or not it is ok to retry a request.\n * @param {Error|DetailedError} err the error returned from the last request\n * @param {number} retryAttempt the number of times the request has already been retried\n * @param {object} options tus Upload options\n *\n * @api private\n */\nfunction shouldRetry(err, retryAttempt, options) {\n  // We only attempt a retry if\n  // - retryDelays option is set\n  // - we didn't exceed the maxium number of retries, yet, and\n  // - this error was caused by a request or it's response and\n  // - the error is server error (i.e. not a status 4xx except a 409 or 423) or\n  // a onShouldRetry is specified and returns true\n  // - the browser does not indicate that we are offline\n  if (options.retryDelays == null || retryAttempt >= options.retryDelays.length || err.originalRequest == null) {\n    return false;\n  }\n  if (options && typeof options.onShouldRetry === 'function') {\n    return options.onShouldRetry(err, retryAttempt, options);\n  }\n  return defaultOnShouldRetry(err);\n}\n\n/**\n * determines if the request should be retried. Will only retry if not a status 4xx except a 409 or 423\n * @param {DetailedError} err\n * @returns {boolean}\n */\nfunction defaultOnShouldRetry(err) {\n  var status = err.originalResponse ? err.originalResponse.getStatus() : 0;\n  return (!inStatusCategory(status, 400) || status === 409 || status === 423) && isOnline();\n}\n\n/**\n * Resolve a relative link given the origin as source. For example,\n * if a HTTP request to http://example.com/files/ returns a Location\n * header with the value /upload/abc, the resolved URL will be:\n * http://example.com/upload/abc\n */\nfunction resolveUrl(origin, link) {\n  return new URL(link, origin).toString();\n}\n\n/**\n * Calculate the start and end positions for the parts if an upload\n * is split into multiple parallel requests.\n *\n * @param {number} totalSize The byte size of the upload, which will be split.\n * @param {number} partCount The number in how many parts the upload will be split.\n * @return {object[]}\n * @api private\n */\nfunction splitSizeIntoParts(totalSize, partCount) {\n  var partSize = Math.floor(totalSize / partCount);\n  var parts = [];\n  for (var i = 0; i < partCount; i++) {\n    parts.push({\n      start: partSize * i,\n      end: partSize * (i + 1)\n    });\n  }\n  parts[partCount - 1].end = totalSize;\n  return parts;\n}\nBaseUpload.defaultOptions = defaultOptions;\nexport default BaseUpload;","/**\n * Generate a UUID v4 based on random numbers. We intentioanlly use the less\n * secure Math.random function here since the more secure crypto.getRandomNumbers\n * is not available on all platforms.\n * This is not a problem for us since we use the UUID only for generating a\n * request ID, so we can correlate server logs to client errors.\n *\n * This function is taken from following site:\n * https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n *\n * @return {string} The generate UUID\n */\nexport default function uuid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0;\n    var v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}","var isReactNative = function isReactNative() {\n  return typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative';\n};\nexport default isReactNative;","/**\n * uriToBlob resolves a URI to a Blob object. This is used for\n * React Native to retrieve a file (identified by a file://\n * URI) as a blob.\n */\nexport default function uriToBlob(uri) {\n  return new Promise(function (resolve, reject) {\n    var xhr = new XMLHttpRequest();\n    xhr.responseType = 'blob';\n    xhr.onload = function () {\n      var blob = xhr.response;\n      resolve(blob);\n    };\n    xhr.onerror = function (err) {\n      reject(err);\n    };\n    xhr.open('GET', uri);\n    xhr.send();\n  });\n}","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport isCordova from './isCordova.js';\nimport readAsByteArray from './readAsByteArray.js';\nvar FileSource = /*#__PURE__*/function () {\n  // Make this.size a method\n  function FileSource(file) {\n    _classCallCheck(this, FileSource);\n    this._file = file;\n    this.size = file.size;\n  }\n  return _createClass(FileSource, [{\n    key: \"slice\",\n    value: function slice(start, end) {\n      // In Apache Cordova applications, a File must be resolved using\n      // FileReader instances, see\n      // https://cordova.apache.org/docs/en/8.x/reference/cordova-plugin-file/index.html#read-a-file\n      if (isCordova()) {\n        return readAsByteArray(this._file.slice(start, end));\n      }\n      var value = this._file.slice(start, end);\n      var done = end >= this.size;\n      return Promise.resolve({\n        value: value,\n        done: done\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      // Nothing to do here since we don't need to release any resources.\n    }\n  }]);\n}();\nexport { FileSource as default };","var isCordova = function isCordova() {\n  return typeof window !== 'undefined' && (typeof window.PhoneGap !== 'undefined' || typeof window.Cordova !== 'undefined' || typeof window.cordova !== 'undefined');\n};\nexport default isCordova;","/**\n * readAsByteArray converts a File object to a Uint8Array.\n * This function is only used on the Apache Cordova platform.\n * See https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-file/index.html#read-a-file\n */\nexport default function readAsByteArray(chunk) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n    reader.onload = function () {\n      var value = new Uint8Array(reader.result);\n      resolve({\n        value: value\n      });\n    };\n    reader.onerror = function (err) {\n      reject(err);\n    };\n    reader.readAsArrayBuffer(chunk);\n  });\n}","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction len(blobOrArray) {\n  if (blobOrArray === undefined) return 0;\n  if (blobOrArray.size !== undefined) return blobOrArray.size;\n  return blobOrArray.length;\n}\n\n/*\n  Typed arrays and blobs don't have a concat method.\n  This function helps StreamSource accumulate data to reach chunkSize.\n*/\nfunction concat(a, b) {\n  if (a.concat) {\n    // Is `a` an Array?\n    return a.concat(b);\n  }\n  if (a instanceof Blob) {\n    return new Blob([a, b], {\n      type: a.type\n    });\n  }\n  if (a.set) {\n    // Is `a` a typed array?\n    var c = new a.constructor(a.length + b.length);\n    c.set(a);\n    c.set(b, a.length);\n    return c;\n  }\n  throw new Error('Unknown data type');\n}\nvar StreamSource = /*#__PURE__*/function () {\n  function StreamSource(reader) {\n    _classCallCheck(this, StreamSource);\n    this._buffer = undefined;\n    this._bufferOffset = 0;\n    this._reader = reader;\n    this._done = false;\n  }\n  return _createClass(StreamSource, [{\n    key: \"slice\",\n    value: function slice(start, end) {\n      if (start < this._bufferOffset) {\n        return Promise.reject(new Error(\"Requested data is before the reader's current offset\"));\n      }\n      return this._readUntilEnoughDataOrDone(start, end);\n    }\n  }, {\n    key: \"_readUntilEnoughDataOrDone\",\n    value: function _readUntilEnoughDataOrDone(start, end) {\n      var _this = this;\n      var hasEnoughData = end <= this._bufferOffset + len(this._buffer);\n      if (this._done || hasEnoughData) {\n        var value = this._getDataFromBuffer(start, end);\n        var done = value == null ? this._done : false;\n        return Promise.resolve({\n          value: value,\n          done: done\n        });\n      }\n      return this._reader.read().then(function (_ref) {\n        var value = _ref.value,\n          done = _ref.done;\n        if (done) {\n          _this._done = true;\n        } else if (_this._buffer === undefined) {\n          _this._buffer = value;\n        } else {\n          _this._buffer = concat(_this._buffer, value);\n        }\n        return _this._readUntilEnoughDataOrDone(start, end);\n      });\n    }\n  }, {\n    key: \"_getDataFromBuffer\",\n    value: function _getDataFromBuffer(start, end) {\n      // Remove data from buffer before `start`.\n      // Data might be reread from the buffer if an upload fails, so we can only\n      // safely delete data when it comes *before* what is currently being read.\n      if (start > this._bufferOffset) {\n        this._buffer = this._buffer.slice(start - this._bufferOffset);\n        this._bufferOffset = start;\n      }\n      // If the buffer is empty after removing old data, all data has been read.\n      var hasAllDataBeenRead = len(this._buffer) === 0;\n      if (this._done && hasAllDataBeenRead) {\n        return null;\n      }\n      // We already removed data before `start`, so we just return the first\n      // chunk from the buffer.\n      return this._buffer.slice(0, end - start);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (this._reader.cancel) {\n        this._reader.cancel();\n      }\n    }\n  }]);\n}();\nexport { StreamSource as default };","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport isReactNative from './isReactNative.js';\nimport uriToBlob from './uriToBlob.js';\nimport FileSource from './sources/FileSource.js';\nimport StreamSource from './sources/StreamSource.js';\nvar FileReader = /*#__PURE__*/function () {\n  function FileReader() {\n    _classCallCheck(this, FileReader);\n  }\n  return _createClass(FileReader, [{\n    key: \"openFile\",\n    value: function () {\n      var _openFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(input, chunkSize) {\n        var blob;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!(isReactNative() && input && typeof input.uri !== 'undefined')) {\n                _context.next = 11;\n                break;\n              }\n              _context.prev = 1;\n              _context.next = 4;\n              return uriToBlob(input.uri);\n            case 4:\n              blob = _context.sent;\n              return _context.abrupt(\"return\", new FileSource(blob));\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n              throw new Error(\"tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. \".concat(_context.t0));\n            case 11:\n              if (!(typeof input.slice === 'function' && typeof input.size !== 'undefined')) {\n                _context.next = 13;\n                break;\n              }\n              return _context.abrupt(\"return\", Promise.resolve(new FileSource(input)));\n            case 13:\n              if (!(typeof input.read === 'function')) {\n                _context.next = 18;\n                break;\n              }\n              chunkSize = Number(chunkSize);\n              if (Number.isFinite(chunkSize)) {\n                _context.next = 17;\n                break;\n              }\n              return _context.abrupt(\"return\", Promise.reject(new Error('cannot create source for stream without a finite value for the `chunkSize` option')));\n            case 17:\n              return _context.abrupt(\"return\", Promise.resolve(new StreamSource(input, chunkSize)));\n            case 18:\n              return _context.abrupt(\"return\", Promise.reject(new Error('source object may only be an instance of File, Blob, or Reader in this environment')));\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[1, 8]]);\n      }));\n      function openFile(_x, _x2) {\n        return _openFile.apply(this, arguments);\n      }\n      return openFile;\n    }()\n  }]);\n}();\nexport { FileReader as default };","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar XHRHttpStack = /*#__PURE__*/function () {\n  function XHRHttpStack() {\n    _classCallCheck(this, XHRHttpStack);\n  }\n  return _createClass(XHRHttpStack, [{\n    key: \"createRequest\",\n    value: function createRequest(method, url) {\n      return new Request(method, url);\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return 'XHRHttpStack';\n    }\n  }]);\n}();\nexport { XHRHttpStack as default };\nvar Request = /*#__PURE__*/function () {\n  function Request(method, url) {\n    _classCallCheck(this, Request);\n    this._xhr = new XMLHttpRequest();\n    this._xhr.open(method, url, true);\n    this._method = method;\n    this._url = url;\n    this._headers = {};\n  }\n  return _createClass(Request, [{\n    key: \"getMethod\",\n    value: function getMethod() {\n      return this._method;\n    }\n  }, {\n    key: \"getURL\",\n    value: function getURL() {\n      return this._url;\n    }\n  }, {\n    key: \"setHeader\",\n    value: function setHeader(header, value) {\n      this._xhr.setRequestHeader(header, value);\n      this._headers[header] = value;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(header) {\n      return this._headers[header];\n    }\n  }, {\n    key: \"setProgressHandler\",\n    value: function setProgressHandler(progressHandler) {\n      // Test support for progress events before attaching an event listener\n      if (!('upload' in this._xhr)) {\n        return;\n      }\n      this._xhr.upload.onprogress = function (e) {\n        if (!e.lengthComputable) {\n          return;\n        }\n        progressHandler(e.loaded);\n      };\n    }\n  }, {\n    key: \"send\",\n    value: function send() {\n      var _this = this;\n      var body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      return new Promise(function (resolve, reject) {\n        _this._xhr.onload = function () {\n          resolve(new Response(_this._xhr));\n        };\n        _this._xhr.onerror = function (err) {\n          reject(err);\n        };\n        _this._xhr.send(body);\n      });\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      this._xhr.abort();\n      return Promise.resolve();\n    }\n  }, {\n    key: \"getUnderlyingObject\",\n    value: function getUnderlyingObject() {\n      return this._xhr;\n    }\n  }]);\n}();\nvar Response = /*#__PURE__*/function () {\n  function Response(xhr) {\n    _classCallCheck(this, Response);\n    this._xhr = xhr;\n  }\n  return _createClass(Response, [{\n    key: \"getStatus\",\n    value: function getStatus() {\n      return this._xhr.status;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(header) {\n      return this._xhr.getResponseHeader(header);\n    }\n  }, {\n    key: \"getBody\",\n    value: function getBody() {\n      return this._xhr.responseText;\n    }\n  }, {\n    key: \"getUnderlyingObject\",\n    value: function getUnderlyingObject() {\n      return this._xhr;\n    }\n  }]);\n}();","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar hasStorage = false;\ntry {\n  // Note: localStorage does not exist in the Web Worker's context, so we must use window here.\n  hasStorage = 'localStorage' in window;\n\n  // Attempt to store and read entries from the local storage to detect Private\n  // Mode on Safari on iOS (see #49)\n  // If the key was not used before, we remove it from local storage again to\n  // not cause confusion where the entry came from.\n  var key = 'tusSupport';\n  var originalValue = localStorage.getItem(key);\n  localStorage.setItem(key, originalValue);\n  if (originalValue === null) localStorage.removeItem(key);\n} catch (e) {\n  // If we try to access localStorage inside a sandboxed iframe, a SecurityError\n  // is thrown. When in private mode on iOS Safari, a QuotaExceededError is\n  // thrown (see #49)\n  if (e.code === e.SECURITY_ERR || e.code === e.QUOTA_EXCEEDED_ERR) {\n    hasStorage = false;\n  } else {\n    throw e;\n  }\n}\nexport var canStoreURLs = hasStorage;\nexport var WebStorageUrlStorage = /*#__PURE__*/function () {\n  function WebStorageUrlStorage() {\n    _classCallCheck(this, WebStorageUrlStorage);\n  }\n  return _createClass(WebStorageUrlStorage, [{\n    key: \"findAllUploads\",\n    value: function findAllUploads() {\n      var results = this._findEntries('tus::');\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(fingerprint) {\n      var results = this._findEntries(\"tus::\".concat(fingerprint, \"::\"));\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(urlStorageKey) {\n      localStorage.removeItem(urlStorageKey);\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(fingerprint, upload) {\n      var id = Math.round(Math.random() * 1e12);\n      var key = \"tus::\".concat(fingerprint, \"::\").concat(id);\n      localStorage.setItem(key, JSON.stringify(upload));\n      return Promise.resolve(key);\n    }\n  }, {\n    key: \"_findEntries\",\n    value: function _findEntries(prefix) {\n      var results = [];\n      for (var i = 0; i < localStorage.length; i++) {\n        var _key = localStorage.key(i);\n        if (_key.indexOf(prefix) !== 0) continue;\n        try {\n          var upload = JSON.parse(localStorage.getItem(_key));\n          upload.urlStorageKey = _key;\n          results.push(upload);\n        } catch (_e) {\n          // The JSON parse error is intentionally ignored here, so a malformed\n          // entry in the storage cannot prevent an upload.\n        }\n      }\n      return results;\n    }\n  }]);\n}();","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport DetailedError from '../error.js';\nimport { enableDebugLog } from '../logger.js';\nimport NoopUrlStorage from '../noopUrlStorage.js';\nimport BaseUpload from '../upload.js';\nimport FileReader from './fileReader.js';\nimport fingerprint from './fileSignature.js';\nimport DefaultHttpStack from './httpStack.js';\nimport { WebStorageUrlStorage, canStoreURLs } from './urlStorage.js';\nvar defaultOptions = _objectSpread(_objectSpread({}, BaseUpload.defaultOptions), {}, {\n  httpStack: new DefaultHttpStack(),\n  fileReader: new FileReader(),\n  urlStorage: canStoreURLs ? new WebStorageUrlStorage() : new NoopUrlStorage(),\n  fingerprint: fingerprint\n});\nvar Upload = /*#__PURE__*/function (_BaseUpload) {\n  function Upload() {\n    var file = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Upload);\n    options = _objectSpread(_objectSpread({}, defaultOptions), options);\n    return _callSuper(this, Upload, [file, options]);\n  }\n  _inherits(Upload, _BaseUpload);\n  return _createClass(Upload, null, [{\n    key: \"terminate\",\n    value: function terminate(url) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      options = _objectSpread(_objectSpread({}, defaultOptions), options);\n      return BaseUpload.terminate(url, options);\n    }\n  }]);\n}(BaseUpload); // Note: We don't reference `window` here because these classes also exist in a Web Worker's context.\nvar isSupported = typeof XMLHttpRequest === 'function' && typeof Blob === 'function' && typeof Blob.prototype.slice === 'function';\nexport { Upload, canStoreURLs, defaultOptions, isSupported, enableDebugLog, DefaultHttpStack, DetailedError };","import isReactNative from './isReactNative.js';\n\n// TODO: Differenciate between input types\n\n/**\n * Generate a fingerprint for a file which will be used the store the endpoint\n *\n * @param {File} file\n * @param {Object} options\n * @param {Function} callback\n */\nexport default function fingerprint(file, options) {\n  if (isReactNative()) {\n    return Promise.resolve(reactNativeFingerprint(file, options));\n  }\n  return Promise.resolve(['tus-br', file.name, file.type, file.size, file.lastModified, options.endpoint].join('-'));\n}\nfunction reactNativeFingerprint(file, options) {\n  var exifHash = file.exif ? hashCode(JSON.stringify(file.exif)) : 'noexif';\n  return ['tus-rn', file.name || 'noname', file.size || 'nosize', exifHash, options.endpoint].join('/');\n}\nfunction hashCode(str) {\n  // from https://stackoverflow.com/a/8831937/151666\n  var hash = 0;\n  if (str.length === 0) {\n    return hash;\n  }\n  for (var i = 0; i < str.length; i++) {\n    var _char = str.charCodeAt(i);\n    hash = (hash << 5) - hash + _char;\n    hash &= hash; // Convert to 32bit integer\n  }\n  return hash;\n}","import * as tus from 'tus-js-client';\r\nimport {fetchRestApi} from '../../../js/form_submit_functions.js';\r\n\r\nconsole.log('vimeo upload loaded');\r\n\r\nexport class VimeoUpload{\r\n    constructor(file){\r\n        this.urlStorage     = tus.defaultOptions.urlStorage;\r\n        this.getFingerprint = tus.defaultOptions.fingerprint;\r\n        this.file           = file;\r\n        this.storedEntry    = {};\r\n    }\r\n\r\n    async findInStorage(){\r\n        this.fingerprint    = await this.getFingerprint(this.file, { endpoint: sim.baseUrl });\r\n        let storedEntries   = await this.urlStorage.findUploadsByFingerprint(this.fingerprint);\r\n\r\n        if (storedEntries.length) {\r\n            this.storedEntry = storedEntries[0];\r\n            if (this.storedEntry.uploadUrl) {\r\n                return true;\r\n            }\r\n            // cleanup\r\n            this.urlStorage.removeUpload(this.storedEntry.urlStorageKey);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    async getVimeoUploadUrl(){\r\n        var formData = new FormData();\r\n        formData.append('file_size', this.file.size);\r\n        formData.append('file_name', this.file.name);\r\n        formData.append('file_type', this.file.type);\r\n\r\n        var response    = await fetchRestApi('vimeo/prepare_vimeo_upload', formData);\r\n\r\n        //Failed\r\n        if(response){\r\n            var uploadUrl\t\t= response.upload_link;\r\n            var postId\t\t    = response.post_id;\r\n            var vimeoId\t\t    = response.vimeo_id;\r\n\r\n            this.storedEntry = {\r\n                size: this.file.size,\r\n                metadata: {\r\n                    filename: this.file.name,\r\n                    filetype: this.file.type,\r\n                },\r\n                creationTime: new Date().toString(),\r\n                url: uploadUrl,\r\n                postId: postId,\r\n                vimeoId: vimeoId\r\n            };\r\n\r\n            this.storedEntry.urlStorageKey = await this.urlStorage.addUpload(this.fingerprint, this.storedEntry);\r\n\r\n            return true;\r\n        }else{\r\n            console.error('Failed');\r\n            console.error(formData);\r\n            console.log(this.file);\r\n\r\n            // reset\r\n            return false;\r\n        }\r\n    }\r\n\r\n    async tusUploader(){\r\n        /* \r\n        ** Get the upload url\r\n        */\r\n        // Check if already an url in memory\r\n        var existing    = await this.findInStorage();\r\n        if(!existing){\r\n            // Nothing found, get a new upload url\r\n            var result = await this.getVimeoUploadUrl();\r\n\r\n            if(!result){\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return new tus.Upload(this.file, {\r\n            uploadUrl: this.storedEntry.url,\r\n            headers: {\r\n                // https://developer.vimeo.com/api/upload/videos#resumable-approach-step-2\r\n                Accept: 'application/vnd.vimeo.*+json;version=3.4' // required\r\n            },\r\n            chunkSize: 50000000, // required\r\n        });\r\n    }\r\n\r\n    removeFromStorage(){\r\n        this.urlStorage.removeUpload(this.storedEntry.urlStorageKey);\r\n    }\r\n}","export function formReset(form){\r\n\t//reset form to the default\r\n\tform.reset();\r\n\r\n\t//hide loaders\r\n\tform.querySelectorAll('.loadergif').forEach(el=>el.classList.add('hidden'));\r\n\r\n\t//hide button again if needed\r\n\tform.querySelectorAll('.multistepcontrols .form_submit').forEach(el=>el.classList.add('hidden'));\r\n\t\r\n\t//fix required fields\r\n\tform.querySelectorAll('[required]').forEach(el=>{el.required = false;});\r\n\t\r\n\t//empty any fileuploads\r\n\tform.querySelectorAll('.file_upload').forEach(el=>el.value='');\r\n\r\n\t//show hidden file uploads\r\n\tform.querySelectorAll('.upload_div.hidden').forEach(el=>el.classList.remove('hidden'));\r\n\t\r\n\t//Reset nice selects\r\n\tform.querySelectorAll('select').forEach(el=>el._niceselect.update());\r\n\t\r\n\t//remove doc previews\r\n\tdocument.querySelectorAll('.documentpreview .document').forEach(el=>el.remove());\r\n\t\r\n\tif(form.querySelector('.formstep') != null){\r\n\t\t//mark all circles as not active anymore\r\n\t\tform.querySelectorAll('.multistepcontrols .step.finish').forEach(el=>el.classList.remove('finish'));\r\n\t\r\n\t\t//go back to the first part of the form in case of multistep\r\n\t\tFormFunctions.showTab(0,form);\r\n\t}\r\n}\r\n\r\nexport async function submitForm(target, url){\r\n\tlet form\t\t= target.closest('form');\r\n\tlet validity \t= true;\r\n\t\r\n\t//get all hidden required inputs and unrequire them\r\n\tform.querySelectorAll('.hidden [required], select[required], .nice-select-search[required], .stephidden [required]').forEach(el=>{el.required = false});\r\n\r\n\t// enable disabled fields so it gets included and warnings are shown\r\n\tform.querySelectorAll('[disabled][required]').forEach( el=>{\r\n\t\tel.disabled\t= false;\r\n\t\tel.classList.add('was-disabled'); \r\n\t});\r\n\r\n\tvalidity\t= form.reportValidity();\r\n\r\n\t//only continue if valid\r\n\tif(validity){\r\n\t\t//Display loader\r\n\t\ttarget.closest('.submit_wrapper').querySelectorAll('.loadergif').forEach(loader=>loader.classList.remove('hidden'));\r\n\t\t\r\n\t\t//save any tinymce forms\r\n\t\tif (typeof tinymce !== 'undefined') {\r\n\t\t\ttinymce.get().forEach((tn)=>{\r\n\t\t\t\t// only save when the visual tab is active\r\n\t\t\t\tif(!tn.hidden){\r\n\t\t\t\t\ttn.save()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tlet formData = new FormData(form);\r\n\r\n\t\t// disable fields again\r\n\t\tform.querySelectorAll('.was-disabled').forEach( el=>{\r\n\t\t\tel.disabled\t= true;\r\n\t\t\tel.classList.remove('was-disabled'); \r\n\t\t});\r\n\r\n\t\tif(form.dataset.addempty == 'true'){\r\n\t\t\t//also append at least one off all checkboxes\r\n\t\t\tform.querySelectorAll('input[type=\"checkbox\"]:not(:checked)').forEach(checkbox=>{\r\n\t\t\t\t//if no checkbox with this name exist yet\r\n\t\t\t\tif(!formData.has(checkbox.name)){\r\n\t\t\t\t\tformData.append(checkbox.name,'');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// also add get params\r\n\t\ttry{\r\n\t\t\tlocation['search'].split('?')[1].split('&').forEach(param=>{\r\n\t\t\t\tlet split\t= param.split('=');\r\n\t\t\t\tif(split[0] != 'formbuilder' && split[0] != 'main_tab' && split[0] != 'second_tab'){\r\n\t\t\t\t\tformData.append(split[0], split[1]);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}catch{\r\n\t\t\t//pass\r\n\t\t}\r\n\r\n\t\t// store values of multi-selects\r\n\t\tdocument.querySelectorAll('select[multiple]').forEach(el => {\r\n\t\t\tformData.set(el.name, Array.from(el.selectedOptions,e=>e.value));\r\n\t\t});\r\n\r\n\t\tlet response = await fetchRestApi(url, formData);\r\n\r\n\t\tform.querySelectorAll('.submit_wrapper .loadergif').forEach(loader => loader.classList.add('hidden'));\r\n\r\n\t\tif(form.dataset.reset != 'true'){\r\n\t\t\tmarkComplete();\r\n\t\t}\r\n\r\n\t\treturn response;\r\n\t}else{\r\n\t\tform.querySelectorAll(':invalid').forEach(el=>{\r\n\t\t\tif(el.validationMessage != undefined){\r\n\t\t\t\tMain.displayMessage(`${el.name} has an error:\\n${el.validationMessage}`, 'error').then((value)=>{\r\n\t\t\t\t\tform.querySelectorAll('.formstep:not(.stephidden)').forEach(formstep=>formstep.classList.add('stephidden'));\r\n\r\n\t\t\t\t\tel.closest('.stephidden').classList.remove('stephidden');\r\n\r\n\t\t\t\t\tel.focus();\r\n\r\n\t\t\t\t\tel.scrollIntoView();\r\n\r\n\t\t\t\t\tel.focus();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n/**\r\n * Set the default values to the current values so to not trigger a page leave warning\r\n */\r\nexport function markComplete(){\r\n\r\n\t// pending\r\n\tdocument.querySelectorAll('[data-pending]').forEach(el=>{\r\n\t\tel.removeAttribute('data-pending');\r\n\t});\r\n\r\n\t// check all inputs\r\n\tdocument.querySelectorAll('form input:not([type=radio], [type=checkbox]), form textarea').forEach(el=>{\r\n\t\tel.defaultValue = el.value\r\n\t});\r\n\r\n\t// check all checkboxes and radio\r\n\tdocument.querySelectorAll('form input[type=radio], form input[type=checkbox]').forEach(el=>{\r\n\t\tif(el.checked){\r\n\t\t\tel.defaultChecked = true; \r\n\t\t}\r\n\t});\r\n\r\n\t// check all dropdowns\r\n\tdocument.querySelectorAll('form select').forEach(el=>{\r\n\t\tif(el.selectedIndex != -1 && el.options[el.selectedIndex] != undefined){\r\n\t\t\tel.options[el.selectedIndex].defaultSelected\t= true;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport async function fetchRestApi(url, formData='', showErrors=true){\r\n\tif(formData == ''){\r\n\t\tformData\t= new FormData();\r\n\t}\r\n\t\r\n\tformData.append('_wpnonce', sim.restNonce);\r\n\tlet result;\r\n\ttry{\r\n\t\tresult = await fetch(\r\n\t\t\t`${sim.baseUrl}/wp-json/sim/v2/${url}`,\r\n\t\t\t{\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tcredentials: 'same-origin',\r\n\t\t\t\tbody: formData\r\n\t\t\t}\r\n\t\t);\r\n\t}catch(error){\r\n\t\tconsole.error(error);\r\n\t}\r\n\t\r\n\tlet response\t= await result.text();\r\n\ttry{\r\n\t\tlet json\t\t= JSON.parse(response);\r\n\r\n\t\tif(result.ok){\r\n\t\t\treturn json;\r\n\t\t}else if(json.code == 'rest_cookie_invalid_nonce'){\r\n\t\t\tMain.displayMessage('Please refresh the page and try again!', 'error');\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\tconsole.error(json);\r\n\t\t\tif(json.data == null){\r\n\t\t\t\tMain.displayMessage(json.message);\r\n\t\t\t}else{\r\n\t\t\t\tMain.displayMessage(json.message+\"\\n\"+json.data, 'error');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}catch(error){\r\n\t\tconsole.error(error);\r\n\t\tconsole.error(result);\r\n\t\tconsole.error(response);\r\n\r\n\t\tif(result.ok){\r\n\t\t\tif(showErrors){\r\n\t\t\t\tMain.displayMessage(`Problem parsing the json, refresh the page or try again.`, 'error');\r\n\t\t\t}\r\n\t\t\tconsole.error(`${sim.baseUrl}/wp-json${sim.restApiPrefix}/${url}` );\r\n\t\t\tconsole.error(response);\r\n\t\t}else{\r\n\t\t\tlet modal\t= `<div id='response-details' class=\"modal hidden\" style='z-index:9999999999;'>`;\r\n\t\t\t\tmodal\t+= `<div class=\"modal-content\" style='max-width: min(1000px,100%);'>`\r\n\t\t\t\t\tmodal\t+= `<span class=\"close\">&times;</span>`;\r\n\t\t\t\t\tmodal\t+= response;\r\n\t\t\t\tmodal\t+= `</div>`;\r\n\t\t\tmodal\t+= `</div>`;\r\n\r\n\t\t\tdocument.querySelector('body').insertAdjacentHTML('afterBegin', modal);\r\n\t\t\tMain.displayMessage(`Error loading url ${sim.baseUrl}/wp-json${sim.restApiPrefix}/${url}<br><button class='button small' id='error-details' onclick='(function(){ document.getElementById(\"response-details\").classList.remove(\"hidden\"); })();'>Details</button><br><div class='hidden response-message'>${response}</div>`, 'error');\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n}","import {VimeoUpload} from './../vimeo_upload.js';\r\nimport { showLoader } from './../../../../js/imports.js';\r\n\r\nwindow.wp.Uploader.prototype.init = function() { // plupload 'PostInit'\r\n\tthis.uploader.bind('FileFiltered', function(_up, _files) {\r\n\t\tif(_files.type.split(\"/\")[0] == 'video'){\r\n\t\t\t//show vimeo loader\r\n\t\t\ttry{\r\n\t\t\t\tshowLoader(document.querySelector('.upload-inline-status'), false, '<span class=\"vimeo\" style=\"font-size:x-large;\">Preparing upload to Vimeo</span>');\r\n\t\t\t}catch(error){\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\tthis.uploader.bind('BeforeUpload', function(up, file) {\r\n\t\tif(file.type.split(\"/\")[0] == 'video'){\r\n\t\t\twpMediaUpload(file, up);\r\n\r\n\t\t\t//mark plupload as finished\r\n\t \t\tfile.percent\t\t\t\t\t\t\t= 100;\r\n\t\t\tfile.attachment.attributes.percent\t\t= 100;\r\n\t\t\tfile.loaded\t\t\t\t\t\t\t\t= file.size;\r\n\t\t\tfile.attachment.attributes.loaded\t\t= file.size;\r\n\t\t\tfile.status\t\t\t\t\t\t\t\t= 5;\r\n\t\t\tfile.attachment.attributes.status\t\t= 5;\r\n\t\t\tfile.attachment.attributes.uploading\t= false;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n}\r\n\r\n// upload video to vimeo\r\nasync function wpMediaUpload (plupload_file, wp_uploader) {\r\n    var file    = plupload_file.getNative();\r\n    if (!file) return;\r\n\r\n    //update upload count\r\n    document.querySelector('.upload-details .upload-index').textContent    = wp_uploader.total.uploaded+1;\r\n    \r\n    document.querySelector('.upload-details .upload-filename').textContent = wp_uploader.files[wp_uploader.total.uploaded].name;\r\n\r\n\tvar uploader\t= new VimeoUpload(file);\r\n\tvar upload\t\t= await uploader.tusUploader();\r\n\r\n    upload.options.onProgress   = function(bytesUploaded, bytesTotal) {\r\n\t\t// Show loader\r\n\t\tif(document.querySelector('.loaderwrapper .media-progress-bar') == null && document.querySelector('.loaderwrapper') != null){\r\n\t\t\tdocument.querySelector('.loaderwrapper').innerHTML\t= `\r\n\t\t\t<div class=\"media-progress-bar\" style='display:block;height: 20px;'>\r\n\t\t\t\t<div style=\"width: 0%;height: 20px;\">\r\n\t\t\t\t\t<span style=\"width:100%;text-align:center;color:white;display:block;font-size:smaller;\">0.00%</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>`;\r\n\t\t}\r\n\r\n        //calculate percentage\r\n        let percentage = (bytesUploaded / bytesTotal * 100).toFixed(1)\r\n    \r\n        //show percentage in progressbar\r\n        document.querySelectorAll('.loaderwrapper .media-progress-bar > div, .media-progress-bar > div, .selection-view .uploading:first-child .media-progress-bar > div, .media-uploader-status.uploading .media-progress-bar > div').forEach(div=>{\r\n            div.style.width\t= percentage+'%';\r\n            div.innerHTML\t= '<span style=\"width:100%;text-align:center;color:white;display:block;font-size:smaller;\">'+percentage+'%</span>';\r\n        });\r\n    };\r\n\r\n    upload.options.onSuccess    = async function() {\r\n        uploader.removeFromStorage();\r\n        \r\n        //get wp post details\r\n        let formData = new FormData();\r\n        formData.append('post_id', uploader.storedEntry.postId);\r\n    \r\n        let request = new XMLHttpRequest();\r\n        request.open('POST', `${sim.baseUrl}/wp-json${sim.restApiPrefix}/vimeo/add_uploaded_vimeo`, false);\r\n        request.send(formData);\r\n    \r\n        //mark as uploaded\r\n\t    wp_uploader.dispatchEvent('fileUploaded', plupload_file, request);\r\n\t    document.querySelector(`[data-id=\"${uploader.storedEntry.postId}\"] .filename > div`).textContent = 'Uploaded to Vimeo';    \r\n\r\n\t\tdocument.querySelectorAll('.loaderwrapper').forEach(el=>el.remove());\r\n    }\r\n\r\n    upload.options.onError      = function(error) {\r\n        console.error(`Failed because: ${error}`);\r\n        wp_uploader.dispatchEvent('fileUploaded', plupload_file, '');\r\n    }\r\n\r\n    upload.start();\r\n}","export let scripts;\r\n\r\nexport let afterScriptsLoaded\t= function (attachTo){\r\n    if(typeof(tinymce) != 'undefined'){\r\n        tinymce.remove();\r\n\r\n        // Activate tinyMce's again\r\n        document.querySelectorAll('.entry-content .wp-editor-area').forEach(el =>{\r\n            window.tinyMCE.execCommand('mceAddEditor', false, el.id);\r\n        });\r\n    }    \r\n\r\n    // invoke dom content loaded events\r\n    window.document.dispatchEvent(new Event(\"DOMContentLoaded\", {\r\n        bubbles: true,\r\n        cancelable: true\r\n    }));\r\n\r\n    // Somehow the visual/text switch does not work, manually fix it\r\n    document.querySelectorAll('.wp-switch-editor').forEach(el=>el.addEventListener('click', ev=>{\r\n        let area    = el.closest('.wp-editor-wrap').querySelector('.wp-editor-area');\r\n        let panel   =  el.closest('.wp-editor-wrap').querySelector('.mce-panel');\r\n        area.style.visibility='unset';\r\n        if(ev.target.matches('.switch-tmce')){\r\n           panel.style.display='block';\r\n            area.style.display='none';\r\n        }else{\r\n            panel.style.display='none';\r\n            area.style.display='block';\r\n        }\r\n    }));\r\n\r\n    //add niceselects\r\n\tdocument.querySelectorAll('select:not(.nonice,.swal2-select)').forEach(function(select){\r\n        if(select._niceselect == undefined){\r\n\t\t    select._niceselect = NiceSelect.bind(select,{searchable: true});\r\n        }\r\n\t});\r\n\r\n    const ev = new Event('scriptsloaded');\r\n\tattachTo.dispatchEvent(ev);\r\n}\r\n\r\nexport let addStyles    = function (response, attachTo){\r\n    let temp = document.createElement('div');\r\n\r\n    if(response.js){\r\n        temp.innerHTML =  response.js;\r\n        scripts\t= [...temp.children];\r\n        addScripts(attachTo);\r\n    }\r\n\r\n    if(response.css){\r\n        temp.innerHTML = response.css;\r\n        [...temp.children].forEach(el => {\r\n            document.head.appendChild(el);\r\n        });\r\n    }\r\n}\r\n\r\nexport let addScripts\t= function (attachTo) {\r\n    if(attachTo == undefined){\r\n        return;\r\n    }\r\n\r\n    if(scripts.length == 0){\r\n        afterScriptsLoaded(attachTo);\r\n    }\r\n    let el\t= scripts.shift();\r\n\r\n    if(el == undefined){\r\n        afterScriptsLoaded(attachTo);\r\n        return;\r\n    }\r\n\r\n    // only add if needed\r\n    if(el.tagName == 'SCRIPT' && document.getElementById(el.id) == null){\r\n        var s = document.createElement('script');\r\n\r\n        if(el.type == ''){\r\n            s.type\t= 'text/javascript'; \r\n        }else{\r\n            s.type\t= el.type;\r\n        }\r\n\r\n        if(el.src != ''){\r\n            s.src \t= el.src;\r\n        }else{\r\n            s.innerHTML\t= el.innerHTML;\r\n        }\r\n        \r\n        s.id\t= el.id;\r\n        \r\n        document.head.appendChild(s);\r\n\r\n        if(scripts.length > 0){\r\n            if(el.src != ''){\r\n                s.addEventListener('load', addScripts.bind( null, attachTo ) );\r\n            }else{\r\n                addScripts(attachTo);\r\n            }\r\n        }else{\r\n            if(el.src != ''){\r\n                s.addEventListener('load', afterScriptsLoaded.bind( null, attachTo));\r\n            }else{\r\n                afterScriptsLoaded(attachTo);\r\n            }\t\t\t\r\n        }\r\n    }else if(scripts.length > 0){\r\n        // get next script\r\n        addScripts(attachTo);\r\n    }else{\r\n        afterScriptsLoaded(attachTo);\r\n    }\r\n}\r\n\r\nexport function displayMessage(message, icon, autoclose=false, no_ok=false, timer=1500){\r\n\tif(message == undefined){\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tif(typeof(Swal) != 'undefined'){\r\n\t\tvar options = {\r\n\t\t\ticon: icon,\r\n\t\t\ttitle: message.trim(),\r\n\t\t\tconfirmButtonColor: \"#bd2919\",\r\n\t\t\tcancelButtonColor: 'Crimson'\r\n\t\t};\r\n\r\n\t\tif(no_ok){\r\n\t\t\toptions['showConfirmButton'] = false;\r\n\t\t}\r\n\t\t\r\n\t\tif(typeof(callback) == 'function'){\r\n\t\t\toptions['didClose'] = () => callback();\r\n\t\t}\r\n\t\t\r\n\t\tif(autoclose){\r\n\t\t\toptions['timer'] = timer;\r\n\t\t}\r\n\r\n        if(document.fullscreenElement != null){\r\n\t\t\toptions['target']\t= document.fullscreenElement;\r\n\t\t}\r\n\t\t\r\n\t\treturn Swal.fire(options);\r\n\t}else{\r\n\t\treturn alert(message.trim());\r\n\t}\r\n}\r\n\r\nexport function showLoader(element, replace=true, message=''){\r\n\tif(element == null){\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tlet wrapper\t= document.createElement(\"DIV\");\r\n\twrapper.setAttribute('class','loaderwrapper');\r\n\tif(message != ''){\r\n\t\twrapper.innerHTML\t= message;\r\n\t}\r\n\r\n\tlet loader\t= document.createElement(\"IMG\");\r\n\tloader.setAttribute('class','loadergif');\r\n\tloader.setAttribute(\"src\", sim.loadingGif);\r\n\tloader.style[\"height\"]= \"30px\";\r\n\r\n\twrapper.insertAdjacentElement('beforeEnd', loader);\r\n\tif(replace){\r\n\t\telement.parentNode.replaceChild(wrapper, element);\r\n\t}else{\r\n        let el  = element.nextElementSibling;\r\n        if(el == null){\r\n            element.parentNode.insertAdjacentElement('beforeEnd', wrapper);\r\n        }else{\r\n            element.parentNode.insertBefore(wrapper, el);\r\n        }\r\n\t}\r\n\r\n\treturn wrapper;\r\n}\r\n\r\n//Check if on mobile\r\nexport function isMobileDevice() {\r\n    let check = false;\r\n    (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);\r\n    return check;\r\n}\r\n","// check all media events with wp.media.frame.on('all', function(e) { console.log(e); });\r\n\r\n\r\nimport './partials/vimeo_view.js';\r\nimport './partials/upload_video.js';\r\nimport './partials/max_file_size.js';\r\n\r\nconsole.log('vimeo loaded');"],"names":["plupload","addFileFilter","maxSize","file","cb","undefined","size","type","split","this","trigger","code","FILE_SIZE_ERROR","message","translate","loadVimeoVideo","el","vimeoLink","src","querySelector","document","setTimeout","includes","innerHTML","sim","loadingGif","querySelectorAll","forEach","value","replace","wp","media","view","MediaDetails","prepareSrc","elem","window","MediaElementPlayer","mixin","mejsSettings","Attachment","Details","prototype","render","apply","arguments","removeAllPlayers","$","each","i","tagName","has","Object","hasOwnProperty","decode","input","decodeURIComponent","e","encode","encodeURIComponent","exports","stringify","obj","prefix","key","pairs","call","isNaN","push","length","join","parse","query","part","parser","result","exec","module","port","protocol","required","qs","controlOrWhitespace","CRHTLF","slashes","protocolre","windowsDriveLetter","trimLeft","str","toString","rules","address","url","isSpecial","NaN","ignore","hash","lolcation","loc","location","g","self","finaldestination","Url","unescape","pathname","test","href","scheme","extractProtocol","rest","match","toLowerCase","forwardSlashes","otherSlashes","slashesCount","slice","relative","extracted","instruction","index","instructions","lastIndexOf","indexOf","charAt","base","path","concat","last","unshift","up","splice","resolve","host","hostname","username","password","auth","origin","set","fn","pop","char","ins","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","globalThis","Function","prop","_typeof","Symbol","iterator","constructor","_defineProperties","target","props","descriptor","configurable","writable","_toPropertyKey","t","toPrimitive","r","TypeError","String","_toPrimitive","NoopUrlStorage","Constructor","instance","_classCallCheck","protoProps","Promise","_fingerprint","_urlStorageKey","_upload","_hasBuffer","Buffer","_TE","TextDecoder","TextEncoder","b64chs","Array","_fromCC","tab","c","fromCharCode","bind","_mkUriSafe","Uint8Array","from","m0","_btoa","btoa","bin","u32","c0","c1","c2","asc","pad","charCodeAt","substring","_fromUint8Array","u8a","strs","l","subarray","cb_utob","cc","re_utob","_encode","s","gBase64","urlsafe","_wrapNativeSuper","Class","_cache","Map","_isNativeFunction","Wrapper","_isNativeReflectConstruct","Reflect","construct","p","_setPrototypeOf","_construct","_getPrototypeOf","create","Boolean","valueOf","setPrototypeOf","__proto__","getPrototypeOf","_Error","DetailedError","_this","causingErr","req","res","ReferenceError","_assertThisInitialized","_possibleConstructorReturn","originalRequest","originalResponse","causingError","requestId","getHeader","method","getMethod","getURL","status","getStatus","body","getBody","subClass","superClass","_inherits","Error","_regeneratorRuntime","asyncIterator","u","toStringTag","define","wrap","Generator","Context","makeInvokeMethod","tryCatch","arg","h","f","y","GeneratorFunction","GeneratorFunctionPrototype","v","values","defineIteratorMethods","_invoke","AsyncIterator","invoke","__await","then","callInvokeWithMethodAndArg","done","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","displayName","isGeneratorFunction","name","mark","awrap","async","keys","reverse","prev","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","info","error","_slicedToArray","arr","isArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","len","arr2","ownKeys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","PROTOCOL_TUS_V1","PROTOCOL_IETF_DRAFT_03","defaultOptions","endpoint","uploadUrl","metadata","metadataForPartialUploads","fingerprint","uploadSize","onProgress","onChunkComplete","onSuccess","onError","onUploadUrlAvailable","overridePatchMethod","headers","addRequestId","onBeforeRequest","onAfterResponse","onShouldRetry","defaultOnShouldRetry","chunkSize","Number","POSITIVE_INFINITY","retryDelays","parallelUploads","parallelUploadBoundaries","storeFingerprintForResuming","removeFingerprintOnSuccess","uploadLengthDeferred","uploadDataDuringCreation","urlStorage","fileReader","httpStack","BaseUpload","options","console","log","_urlStorage","_req","_offset","_aborted","_size","_source","_retryAttempt","_retryTimeout","_offsetBeforeRetry","_parallelUploads","_parallelUploadUrls","findUploadsByFingerprint","previousUpload","parallelUploadUrls","urlStorageKey","_this2","_i","_arr","optionName","_emitError","openFile","source","_startParallelUpload","_startSingleUpload","err","_this$options$paralle","_this3","totalSize","totalProgress","partCount","parts","partSize","Math","floor","start","end","splitSizeIntoParts","uploads","map","lastPartProgress","_ref","newPartProgress","_emitProgress","upload","_saveUploadInUrlStorage","all","_openRequest","setHeader","encodeMetadata","_sendRequest","inStatusCategory","resolveUrl","_emitSuccess","_emitHttpError","_resumeUpload","_createUpload","shouldTerminate","_this4","_step","_iterator","it","F","_e","normalCompletion","didErr","step","_e2","_createForOfIteratorHelper","abort","clearTimeout","terminate","_removeFromUrlStorage","_this5","shouldRetry","delay","lastResponse","bytesSent","bytesTotal","bytesAccepted","_this6","promise","_addChunkToRequest","close","_handleUploadResponse","_performUpload","_this7","offset","parseInt","_this8","_this9","setProgressHandler","_ref2","valueSize","newSize","_emitChunkComplete","openRequest","_this10","removeUpload","_this11","storedUpload","creationTime","Date","addUpload","sendRequest","staticProps","remainingDelays","newOptions","entries","_ref3","_ref4","category","createRequest","_i2","_Object$entries","_Object$entries$_i","random","_x","_x2","_x3","_sendRequest2","_callee","_context","send","args","retryAttempt","online","navigator","onLine","link","product","uriToBlob","uri","xhr","XMLHttpRequest","responseType","onload","blob","response","onerror","open","FileSource","_file","PhoneGap","Cordova","cordova","chunk","reader","FileReader","readAsArrayBuffer","blobOrArray","StreamSource","_buffer","_bufferOffset","_reader","_done","_readUntilEnoughDataOrDone","hasEnoughData","_getDataFromBuffer","read","b","Blob","hasAllDataBeenRead","cancel","t0","isFinite","_openFile","XHRHttpStack","Request","_xhr","_method","_url","_headers","header","setRequestHeader","progressHandler","onprogress","lengthComputable","loaded","Response","getResponseHeader","responseText","hasStorage","originalValue","localStorage","getItem","setItem","removeItem","SECURITY_ERR","QUOTA_EXCEEDED_ERR","canStoreURLs","WebStorageUrlStorage","results","_findEntries","id","round","JSON","_key","exifHash","exif","hashCode","reactNativeFingerprint","lastModified","Upload","_BaseUpload","VimeoUpload","getFingerprint","storedEntry","findInStorage","baseUrl","storedEntries","getVimeoUploadUrl","formData","FormData","append","showErrors","restNonce","fetch","credentials","text","json","ok","Main","displayMessage","data","restApiPrefix","modal","insertAdjacentHTML","fetchRestApi","upload_link","postId","post_id","vimeoId","vimeo_id","filename","filetype","tusUploader","Accept","removeFromStorage","Uploader","init","uploader","_up","_files","element","wrapper","createElement","setAttribute","loader","style","insertAdjacentElement","parentNode","replaceChild","nextElementSibling","insertBefore","showLoader","plupload_file","wp_uploader","getNative","textContent","total","uploaded","files","bytesUploaded","percentage","toFixed","div","width","request","dispatchEvent","remove","wpMediaUpload","percent","attachment","attributes","uploading"],"sourceRoot":""}